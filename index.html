<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Star Trek Ultimate Challenge</title>
<style>
body {
    margin: 0;
    font-family: 'Orbitron', sans-serif;
    background: #000;
    color: #00ffff;
    text-align: center;
    overflow-x: hidden;
}
.screen { display: none; padding: 30px; }
.active { display: block; }
button {
    padding: 12px 24px;
    margin: 10px;
    font-size: 16px;
    background: #111;
    color: #00ffff;
    border: 2px solid #00ffff;
    cursor: pointer;
    text-transform: uppercase;
}
button:hover { background: #00ffff; color: black; }
input {
    padding: 12px;
    font-size: 18px;
    width: 80px;
    text-align: center;
    text-transform: uppercase;
}
.progress-container {
    width: 80%;
    margin: 20px auto;
    background: #222;
    border: 1px solid #00ffff;
}
.progress-bar {
    height: 20px;
    width: 0%;
    background: #00ffff;
}
.fanfare {
    font-size: 32px;
    color: gold;
    animation: flash 1s infinite;
}
@keyframes flash {
    0%,50%,100%{color: gold;}
    25%,75%{color: #fff;}
}
.leaderboard { margin-top: 20px; }
#answers button { display: block; width: 300px; margin: 10px auto; }
</style>
</head>
<body>

<div id="intro" class="screen active">
    <h1>STAR TREK: ULTIMATE CHALLENGE</h1>
    <p>50 questions. Increasing difficulty. All eras.<br>
    Score ≥80% = STARFLEET MASTER STATUS!</p>
    <input id="initials" maxlength="3" placeholder="ABC">
    <br>
    <button onclick="startQuiz()">ENGAGE</button>
</div>

<div id="quiz" class="screen">
    <h2 id="question"></h2>
    <div id="answers"></div>
    <div class="progress-container"><div id="progress" class="progress-bar"></div></div>
    <p id="scoreDisplay"></p>
</div>

<div id="result" class="screen">
    <h1>MISSION COMPLETE</h1>
    <p id="finalScore"></p>
    <div id="celebration"></div>
    <button onclick="restart()">Try Again</button>
    <div class="leaderboard">
        <h3>Leaderboard</h3>
        <div id="leaderboard"></div>
    </div>
</div>

<script>
// --- 50 Star Trek Questions ---
const quizData = [
  {question:"Which ship is commanded by James T. Kirk?",answers:["USS Enterprise NCC-1701","USS Voyager","USS Defiant","USS Kelvin"],correct:0},
  {question:"Which planet is Spock from?",answers:["Vulcan","Andoria","Qo'noS","Romulus"],correct:0},
  {question:"Who commands the Enterprise-D?",answers:["William Riker","Jean‑Luc Picard","Geordi La Forge","Deanna Troi"],correct:1},
  {question:"Who is the holographic doctor aboard Voyager?",answers:["The Doctor","Leonard McCoy","Phlox","Julian Bashir"],correct:0},
  {question:"What species says “Resistance is futile”?",answers:["Dominion","Klingon","Borg","Romulan"],correct:2},
  {question:"What is the name of the bar on Deep Space Nine?",answers:["Quark’s","Ten‑Forward","The After Dark","The Brass Moon"],correct:0},
  {question:"Which series introduced the Borg?",answers:["Enterprise","DS9","TNG","Voyager"],correct:2},
  {question:"Who commands the NX-01 Enterprise?",answers:["Jonathan Archer","Pike","Kirk","Picard"],correct:0},
  {question:"Which animated Star Trek series focuses on the USS Cerritos?",answers:["Lower Decks","TAS","Star Trek Prodigy","Short Treks"],correct:0},
  {question:"Who is the android created by Dr Noonien Soong?",answers:["Data","Lore","B-4","Altan Inigo Soong"],correct:0},
  {question:"What is the Klingon homeworld?",answers:["Qo'noS","Vulcan","Romulus","Bajor"],correct:0},
  {question:"What is the name of Seven of Nine before assimilation?",answers:["Annika Hansen","Jenna D’Sora","Tara Soden","Tasha Yar"],correct:0},
  {question:"Which species are the Odo shapeshifters?",answers:["Vulcans","Changelings","Gorn","Kazon"],correct:1},
  {question:"What was Picard’s rank before captain?",answers:["Commander","Admiral","Lieutenant","Ensign"],correct:0},
  {question:"Which species controls the Great Link?",answers:["Vulcans","Cardassians","Species 8472","Founders"],correct:3},
  {question:"What is the designation of the Borg cube in First Contact?",answers:["Cube 125","Cube 131","Cube 334","Cube Delta"],correct:1},
  {question:"Who was the first Vulcan to serve on the Enterprise NX-01?",answers:["T’Pol","Sarek","Spock prime","Saavik"],correct:0},
  {question:"What is the name of Data’s brother in TNG?",answers:["Lore","B‑4","Altan Inigo Soong","Cleon"],correct:0},
  {question:"Which series features the Caretaker alien?",answers:["Discovery","Voyager","DS9","Enterprise"],correct:1},
  {question:"Who commands the USS Defiant?",answers:["Benjamin Sisko","Kathryn Janeway","Jonathan Archer","William T. Riker"],correct:0},
  {question:"Which world hosts the Bajoran wormhole?",answers:["Bajor","Risa","Qo'noS","Ferenginar"],correct:0},
  {question:"In “Datalore”, who is Data’s first ‘brother’?",answers:["Lore","B‑4","Soong Jr.","Refik"],correct:0},
  {question:"What is dilithium used for in Trek tech?",answers:["Starship fuel","Warp core regulation","Shield modulation","Communication"],correct:1},
  {question:"Who created Data and Lore?",answers:["Dr Noonien Soong","Zefram Cochrane","Montgomery Scott","Reginald Barclay"],correct:0},
  {question:"Which species tried to destroy the Federation with a wormhole weapon?",answers:["Breen","Dominion","Tholians","Breens"],correct:1},
  {question:"Which race comprises the Jem’Hadar?",answers:["Federation","Cardassian","Dominion","Klingon"],correct:2},
  {question:"What is the term for Klingon afterlife?",answers:["Sto‑vo‑kor","Khitomer","Gre’thor","Krona"],correct:0},
  {question:"Which actor played Captain Pike in early Trek appearances and SNW?",answers:["Sean Kenney","Jeffrey Hunter","Bruce Greenwood","Anson Mount"],correct:3},
  {question:"What temporal weapon did the Krenim use in Voyager’s Year of Hell?",answers:["Chroniton disruptor","Kinetic torpedo","Photon cannon","Metreon cascade"],correct:0},
  {question:"What is the Vulcan ritual challenge called?",answers:["Kal’Hyah","IDIC","Kolinar","Khitomer"],correct:0},
  {question:"Who was the Grand Nagus for most of DS9?",answers:["Zek","Rom","Gint","Quark"],correct:0},
  {question:"Which non‑human served as science officer aboard NX‑01?",answers:["T’Pol","Spock","Saavik","Soval"],correct:0},
  {question:"What is the name of the Bajoran spiritual leaders in DS9?",answers:["Prophets","Priests","Shinzon","Tal Shiar"],correct:0},
  {question:"Who was Picard’s first love interest aboard Stargazer?",answers:["Lorenzo","Eline","Natima Lang","Nella Daren"],correct:3},
  {question:"What plant‑eating animal did Worf once care for in TNG?",answers:["Klingon Horse","Protostar beast","Stridii","A ursine"],correct:2},
  {question:"What song did Riker reference in Star Trek IV about Data’s attempt to whistle it?",answers:["Who’s Afraid of the Big Bad Wolf","Pop Goes the Weasel","Row Row Row Your Boat","Merry Had a Little Lamb"],correct:1},
  {question:"What episode first showed the Iconian gateways?",answers:["Contagion","Best of Both Worlds","The Chase","All Good Things"],correct:0},
  {question:"In DS9, what is the true name of the Pah‑wraiths’ realm?",answers:["Fire Caves of Bajor","The Celestial Temple inverted","Hades cluster","Realm of the Dead"],correct:1},
  {question:"Which treaty ended hostilities between the Federation and Romulan Star Empire before TNG?",answers:["Treaty of Algeron","Khittomer Accords","Risa Accord","Duronis Treaty"],correct:0},
  {question:"What was the name of the first Borg to speak in TNG?",answers:["First Drone","Third of Five","Hugh","The Borg Queen"],correct:2},
  {question:"Which Starfleet Academy test is unwinnable by design?",answers:["Kobayashi Maru","Vulcan Challenge","QM Trial","Temporal Loop Exam"],correct:0},
  {question:"What is the full name of Data’s creator father?",answers:["Noonien Soong","Altan Inigo Soong","Julian Soong","Mabel Soong"],correct:0},
  {question:"Which race warred with the Federation using ‘Ascendancy’ tactics in TOS lore?",answers:["Tholians","Gorn","Hydrans","Nausicaans"],correct:1},
  {question:"In Star Trek canon, what registry followed NCC‑1701‑D?",answers:["NCC‑1701‑E","NCC‑1701‑C","NCC‑1701‑B","NCC‑1701‑F"],correct:0}
];

// --- QUIZ LOGIC ---
function shuffle(array){for(let i=array.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[array[i],array[j]]=[array[j],array[i]];}return array;}

let currentQuestion=0;
let score=0;
let playerInitials="";

function startQuiz(){
    const input=document.getElementById("initials").value.trim().toUpperCase();
    if(!/^[A-Z]{2,3}$/.test(input)){alert("Enter 2–3 letters.");return;}
    playerInitials=input;
    shuffle(quizData);
    document.getElementById("intro").classList.remove("active");
    document.getElementById("quiz").classList.add("active");
    currentQuestion=0;score=0;
    loadQuestion();
}

function loadQuestion(){
    const q=quizData[currentQuestion];
    document.getElementById("question").textContent=q.question;
    const answersDiv=document.getElementById("answers");
    answersDiv.innerHTML="";
    q.answers.forEach((answer,index)=>{
        const btn=document.createElement("button");
        btn.textContent=answer;
        btn.onclick=()=>checkAnswer(index);
        answersDiv.appendChild(btn);
    });
    updateProgress();
    updateScore();
}

function checkAnswer(index){
    const buttons=document.querySelectorAll("#answers button");
    buttons.forEach(b=>b.disabled=true);
    if(index===quizData[currentQuestion].correct) score++;
    setTimeout(()=>{
        currentQuestion++;
        if(currentQuestion<quizData.length) loadQuestion();
        else endQuiz();
    },250);
}

function updateProgress(){
    const percent=(currentQuestion/quizData.length)*100;
    document.getElementById("progress").style.width=percent+"%";
}
function updateScore(){document.getElementById("scoreDisplay").textContent=`Score: ${score} / ${quizData.length}`;}

function endQuiz(){
    document.getElementById("quiz").classList.remove("active");
    document.getElementById("result").classList.add("active");
    const percentage=Math.round((score/quizData.length)*100);
    document.getElementById("finalScore").textContent=`${playerInitials} scored ${score}/${quizData.length} (${percentage}%)`;
    if(percentage>=80) document.getElementById("celebration").innerHTML=`<div class="fanfare">STARFLEET MASTER ACHIEVED</div>`;
    else document.getElementById("celebration").textContent="Keep training for Starfleet mastery!";
    saveScore(playerInitials,percentage);
    displayLeaderboard();
}

function saveScore(initials,percentage){
    const lb=JSON.parse(localStorage.getItem("leaderboard"))||[];
    lb.push({initials,percentage});
    lb.sort((a,b)=>b.percentage-a.percentage);
    localStorage.setItem("leaderboard",JSON.stringify(lb.slice(0,10)));
}

function displayLeaderboard(){
    const lb=JSON.parse(localStorage.getItem("leaderboard"))||[];
    const div=document.getElementById("leaderboard");
    div.innerHTML="";
    lb.forEach(e=>div.innerHTML+=`<p>${e.initials} — ${e.percentage}%</p>`);
}

function restart(){
    document.getElementById("intro").classList.add("active");
    document.getElementById("result").classList.remove("active");
    document.getElementById("initials").value="";
    document.getElementById("celebration").innerHTML="";
    document.getElementById("progress").style.width="0%";
    document.getElementById("scoreDisplay").textContent="";
}
</script>
</body>
</html>
